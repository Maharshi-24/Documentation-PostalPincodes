<!DOCTYPE html>
<html lang="en">

<head>
    <title>Postal API Documentation</title>
    <%- include('partials/head') %>
</head>

<body>
    <%- include('partials/header', { page: 'docs' }) %>

        <div class="workspace">
            <!-- Sidebar -->
            <nav class="sidebar">
                <div class="sidebar-group">
                    <div class="sidebar-title">Introduction</div>
                    <a href="#intro" class="sidebar-item active">Overview</a>
                    <a href="#base-url" class="sidebar-item">Base URL</a>
                </div>

                <div class="sidebar-group">
                    <div class="sidebar-title">Endpoints</div>
                    <a href="#pincode" class="sidebar-item">Get Pincode</a>
                    <a href="#search" class="sidebar-item">Search</a>
                    <a href="#nearest" class="sidebar-item">Nearest Office</a>
                    <a href="#batch" class="sidebar-item">Batch Lookup</a>
                </div>
            </nav>

            <!-- Center Pane -->
            <main class="center-pane">
                <section id="intro" class="doc-section">
                    <h1>API Documentation</h1>
                    <p>Welcome to the Indian Postal Pincode API documentation. This API provides comprehensive data
                        about
                        Indian Post Offices, including pincode lookups, location-based searches, and hierarchical
                        drill-downs.</p>
                </section>

                <section id="base-url" class="doc-section">
                    <h2>Base URL</h2>
                    <p>All API requests should be made to:</p>
                    <pre><code>https://postal-pincode-api.vercel.app/api/v1</code></pre>
                </section>

                <section id="pincode" class="doc-section">
                    <h2>Get Pincode Details</h2>
                    <div class="endpoint-card">
                        <div class="endpoint-meta">
                            <span class="method-badge get">GET</span>
                            <span class="path">/pincode/{code}</span>
                        </div>
                        <p>Retrieve detailed information about a specific pincode, including all post offices under it.
                        </p>
                    </div>
                </section>

                <section id="search" class="doc-section">
                    <h2>Search Locations</h2>
                    <div class="endpoint-card">
                        <div class="endpoint-meta">
                            <span class="method-badge get">GET</span>
                            <span class="path">/search</span>
                        </div>
                        <p>Search for post offices by name, district, or state. Supports fuzzy matching.</p>
                        <h3>Query Parameters</h3>
                        <table>
                            <tr>
                                <th>Parameter</th>
                                <th>Type</th>
                                <th>Description</th>
                            </tr>
                            <tr>
                                <td><code style="color: var(--primary)">q</code></td>
                                <td><span class="badge">query</span></td>
                                <td>General search term (e.g., "Ahmedabad")</td>
                            </tr>
                            <tr>
                                <td><code style="color: var(--primary)">fuzzy</code></td>
                                <td><span class="badge">query</span></td>
                                <td>Set to "true" for approximate matching</td>
                            </tr>
                        </table>
                    </div>
                </section>

                <section id="nearest" class="doc-section">
                    <h2>Nearest Post Office</h2>
                    <div class="endpoint-card">
                        <div class="endpoint-meta">
                            <span class="method-badge get">GET</span>
                            <span class="path">/nearest</span>
                        </div>
                        <p>Find post offices near a specific latitude and longitude.</p>
                        <h3>Query Parameters</h3>
                        <table>
                            <tr>
                                <th>Parameter</th>
                                <th>Type</th>
                                <th>Description</th>
                            </tr>
                            <tr>
                                <td><code style="color: var(--primary)">lat</code></td>
                                <td><span class="badge">query</span></td>
                                <td>Latitude (e.g., 23.0225)</td>
                            </tr>
                            <tr>
                                <td><code style="color: var(--primary)">long</code></td>
                                <td><span class="badge">query</span></td>
                                <td>Longitude (e.g., 72.5714)</td>
                            </tr>
                            <tr>
                                <td><code style="color: var(--primary)">radius</code></td>
                                <td><span class="badge">query</span></td>
                                <td>Search radius in km (max 20)</td>
                            </tr>
                        </table>
                    </div>
                </section>

                <section id="batch" class="doc-section">
                    <h2>Batch Lookup</h2>
                    <div class="endpoint-card">
                        <div class="endpoint-meta">
                            <span class="method-badge post">POST</span>
                            <span class="path">/pincode/batch</span>
                        </div>
                        <p>Retrieve details for multiple pincodes in a single request.</p>
                        <h3>Request Body</h3>
                        <pre><code>{
  "pincodes": ["110001", "380001"]
}</code></pre>
                    </div>
                </section>
            </main>
        </div>

        <script src="/assets/js/theme.js"></script>
        <script>
            // Active Link Logic
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        document.querySelectorAll('.sidebar-item').forEach(el => el.classList.remove('active'));
                        const id = entry.target.getAttribute('id');
                        const link = document.querySelector(`.sidebar-item[href="#${id}"]`);
                        if (link) link.classList.add('active');
                    }
                });
            }, { threshold: 0.5 });

            document.querySelectorAll('section').forEach(section => {
                observer.observe(section);
            });
        </script>
</body>

</html>